---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout>
  <div id="app-shell" class="min-h-screen flex bg-surface">
    <!-- Main content area -->
    <div class="flex-1 flex">
      <!-- Enhanced Left Sidebar - Compact Navigation Only -->
      <nav class="w-20 bg-surface-variant glass-panel flex flex-col items-center py-6 space-y-4 border-r border-outline-variant">
        <button class="nav-button nav-button-active" data-panel="chat" aria-label="Chat">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
          </svg>
        </button>
        <button class="nav-button" data-panel="memories" aria-label="Memories">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
          </svg>
        </button>
        <button class="nav-button" data-panel="history" aria-label="History">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </button>
        <button class="nav-button" data-panel="journal" aria-label="Journal">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
          </svg>
        </button>
        <button class="nav-button" data-panel="exercises" aria-label="Mindfulness">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
        </button>
        <button class="nav-button" data-panel="profile" aria-label="Profile">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
        </button>
        <button class="nav-button" data-panel="settings" aria-label="Settings">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
        </button>
      </nav>      <!-- Main panel -->
      <main class="flex-1 flex flex-col min-h-screen">
        <!-- Chat panel -->
        <div id="panel-chat" class="flex-1 flex flex-col chat-panel app-panel">
          <!-- Messages area -->
          <div id="messages-container" class="flex-1 overflow-y-auto px-6 py-8 space-y-4 min-h-[60vh]">
            <!-- Empty state -->
            <div id="empty-state" class="flex-1 flex flex-col items-center justify-center text-center max-w-md mx-auto">
              <div class="mb-8">
                <div class="w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6">
                  <svg class="w-12 h-12 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                  </svg>
                </div>
                <h2 class="text-2xl font-medium text-on-surface mb-3">Start a conversation</h2>
                <p class="text-on-surface-variant">Share what's on your mind and let's explore it together</p>
              </div>
            </div>
          </div>

          <!-- Modern floating message composer -->
          <div class="p-6 pb-8">
            <div class="modern-chat-input">
              <div class="chat-input-container">
                <textarea 
                  id="message-input" 
                  class="chat-textarea" 
                  placeholder="Message Smile AI..."
                  rows="1"
                ></textarea>
                <button id="send-btn" class="chat-send-btn">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Memories panel -->
        <div id="panel-memories" class="flex-1 flex flex-col hidden app-panel">
          <div class="p-6 max-w-6xl mx-auto w-full overflow-y-auto min-h-screen">
            <!-- Panel Header -->
            <div class="glass-panel p-6 rounded-xl mb-6">
              <div class="flex items-center justify-between">
                <div>
                  <h2 class="text-2xl font-medium text-on-surface mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                    </svg>
                    Memories
                  </h2>
                  <p class="text-on-surface-variant text-sm opacity-80">AI-curated insights and meaningful moments from your conversations</p>
                </div>
                <div class="text-right">
                  <div class="text-2xl font-bold text-primary" id="memories-count">12</div>
                  <div class="text-sm text-on-surface-variant">Saved memories</div>
                </div>
              </div>
            </div>

            <!-- Search and Filters -->
            <div class="glass-panel-secondary p-4 rounded-lg mb-6">
              <div class="flex gap-4 items-center flex-wrap">
                <div class="flex-1 min-w-[300px] relative">
                  <input 
                    type="text" 
                    id="memory-search" 
                    placeholder="Search your memories and insights..." 
                    class="custom-select w-full pl-10 pr-4 py-3"
                  />
                  <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                  </svg>
                </div>
                <div class="flex gap-2">
                  <div class="custom-select-wrapper">
                    <select class="custom-select" id="memory-filter">
                      <option value="all">All memories</option>
                      <option value="insights">Insights</option>
                      <option value="breakthroughs">Breakthroughs</option>
                      <option value="patterns">Patterns</option>
                      <option value="progress">Progress</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <button class="btn-outlined" id="export-memories">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    Export
                  </button>
                </div>
              </div>
            </div>

            <!-- Add Memory Form -->
            <div class="glass-panel p-6 rounded-xl mb-6">
              <h3 class="text-lg font-medium text-on-surface mb-4">Add New Memory</h3>
              <form class="space-y-4">
                <div>
                  <select id="entry-type" class="custom-select w-full" required>
                    <option value="">Select memory type...</option>
                    <option value="thought">üí≠ Thought</option>
                    <option value="experience">üåü Experience</option>
                    <option value="dream">üí§ Dream</option>
                    <option value="lesson">üìö Lesson</option>
                    <option value="gratitude">üôè Gratitude</option>
                  </select>
                </div>
                <div>
                  <textarea 
                    id="entry-content" 
                    class="custom-input w-full" 
                    placeholder="Describe your memory..." 
                    rows="4"
                    required
                  ></textarea>
                </div>
                <div class="flex gap-3">
                  <button type="button" id="add-memory-btn" class="btn-primary flex-1">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    Add Memory
                  </button>
                  <button type="button" class="btn-outlined">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.99 1.99 0 013 12V7a4 4 0 014-4z"/>
                    </svg>
                  </button>
                </div>
              </form>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="memories-container">
              <!-- Sample Memory Cards -->
              
              <!-- Insight Memory Card -->
              <div class="glass-panel-interactive p-6 rounded-lg memory-card" data-type="insight" data-date="2025-08-23">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                  </div>
                  <div class="text-xs text-on-surface-variant">2 hours ago</div>
                </div>
                <h3 class="text-lg font-medium text-on-surface mb-3">Breathing Pattern Discovery</h3>
                <p class="text-on-surface-variant text-sm leading-relaxed mb-4">
                  You've noticed that 4-7-8 breathing works particularly well for you in the morning when anxiety peaks. This technique helps reset your nervous system before starting the day.
                </p>
                <div class="flex items-center justify-between">
                  <div class="px-2 py-1 bg-blue-500/10 text-blue-500 text-xs rounded-full">Insight</div>
                  <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete memory">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Pattern Memory Card -->
              <div class="glass-panel-interactive p-6 rounded-lg memory-card" data-type="pattern" data-date="2025-08-22">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                  </div>
                  <div class="text-xs text-on-surface-variant">Yesterday</div>
                </div>
                <h3 class="text-lg font-medium text-on-surface mb-3">Evening Motivation Patterns</h3>
                <p class="text-on-surface-variant text-sm leading-relaxed mb-4">
                  Your motivation tends to be highest in the evening between 7-9 PM. This is when you set the most achievable goals and feel most optimistic about tomorrow.
                </p>
                <div class="flex items-center justify-between">
                  <div class="px-2 py-1 bg-green-500/10 text-green-500 text-xs rounded-full">Pattern</div>
                  <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete memory">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Breakthrough Memory Card -->
              <div class="glass-panel-interactive p-6 rounded-lg memory-card" data-type="breakthrough" data-date="2025-08-20">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                  </div>
                  <div class="text-xs text-on-surface-variant">3 days ago</div>
                </div>
                <h3 class="text-lg font-medium text-on-surface mb-3">Work Boundary Realization</h3>
                <p class="text-on-surface-variant text-sm leading-relaxed mb-4">
                  You recognized that saying "no" to extra work requests isn't selfish‚Äîit's necessary for maintaining your mental health and doing quality work on your main responsibilities.
                </p>
                <div class="flex items-center justify-between">
                  <div class="px-2 py-1 bg-purple-500/10 text-purple-500 text-xs rounded-full">Breakthrough</div>
                  <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete memory">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Progress Memory Card -->
              <div class="glass-panel-interactive p-6 rounded-lg memory-card" data-type="progress" data-date="2025-08-18">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l2-2m0 0l2 2m-2-2v6m0-13a9 9 0 110 18 9 9 0 010-18z"/>
                    </svg>
                  </div>
                  <div class="text-xs text-on-surface-variant">5 days ago</div>
                </div>
                <h3 class="text-lg font-medium text-on-surface mb-3">Sleep Quality Improvement</h3>
                <p class="text-on-surface-variant text-sm leading-relaxed mb-4">
                  After implementing the evening routine we discussed, you've been falling asleep 30 minutes faster and waking up feeling more refreshed. Great progress!
                </p>
                <div class="flex items-center justify-between">
                  <div class="px-2 py-1 bg-orange-500/10 text-orange-500 text-xs rounded-full">Progress</div>
                  <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete memory">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Additional sample cards -->
              <div class="glass-panel-interactive p-6 rounded-lg memory-card" data-type="insight" data-date="2025-08-15">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                  </div>
                  <div class="text-xs text-on-surface-variant">1 week ago</div>
                </div>
                <h3 class="text-lg font-medium text-on-surface mb-3">Perfectionism Awareness</h3>
                <p class="text-on-surface-variant text-sm leading-relaxed mb-4">
                  You identified that perfectionism is often a mask for fear of judgment. Recognizing this has helped you be more compassionate with yourself when making mistakes.
                </p>
                <div class="flex items-center justify-between">
                  <div class="px-2 py-1 bg-blue-500/10 text-blue-500 text-xs rounded-full">Insight</div>
                  <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete memory">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              </div>

              <div class="glass-panel-interactive p-6 rounded-lg memory-card" data-type="pattern" data-date="2025-08-12">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                  </div>
                  <div class="text-xs text-on-surface-variant">11 days ago</div>
                </div>
                <h3 class="text-lg font-medium text-on-surface mb-3">Social Energy Patterns</h3>
                <p class="text-on-surface-variant text-sm leading-relaxed mb-4">
                  You feel most socially energized after spending time in nature. Weekend hikes consistently improve your mood and make social interactions feel more natural.
                </p>
                <div class="flex items-center justify-between">
                  <div class="px-2 py-1 bg-green-500/10 text-green-500 text-xs rounded-full">Pattern</div>
                  <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete memory">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Empty state (hidden when there are memories) -->
              <div class="col-span-full glass-panel-secondary p-8 rounded-lg text-center hidden" id="memories-empty">
                <svg class="w-12 h-12 text-on-surface-variant mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                </svg>
                <h3 class="text-lg font-medium text-on-surface mb-2">No memories yet</h3>
                <p class="text-on-surface-variant text-sm">As you have conversations, I'll save meaningful insights and moments here</p>
              </div>
            </div>
          </div>
        </div>

        <!-- History panel (separate from memories) -->
        <div id="panel-history" class="flex-1 flex flex-col hidden app-panel">
          <div class="p-6 max-w-4xl mx-auto w-full overflow-y-auto min-h-screen">
            <!-- Panel Header -->
            <div class="glass-panel p-6 rounded-xl mb-6">
              <div class="flex items-center justify-between">
                <div>
                  <h2 class="text-2xl font-medium text-on-surface mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Conversation History
                  </h2>
                  <p class="text-on-surface-variant text-sm opacity-80">Your past conversations with Smile AI</p>
                </div>
                <div class="text-right">
                  <div class="text-2xl font-bold text-primary" id="history-count">3</div>
                  <div class="text-sm text-on-surface-variant">Conversations</div>
                </div>
              </div>
            </div>

            <!-- Enhanced Search and Filter -->
            <div class="glass-panel-secondary p-4 rounded-lg mb-6">
              <div class="flex gap-4 items-center flex-wrap">
                <div class="flex-1 min-w-[300px] relative">
                  <input 
                    type="text" 
                    id="history-search" 
                    placeholder="Search conversations by content, date, or keywords..." 
                    class="custom-select w-full pl-10 pr-4 py-3"
                  />
                  <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                  </svg>
                </div>
                <div class="flex gap-2">
                  <div class="custom-select-wrapper">
                    <select class="custom-select" id="history-filter">
                      <option value="all">All time</option>
                      <option value="today">Today</option>
                      <option value="week">This week</option>
                      <option value="month">This month</option>
                      <option value="quarter">Last 3 months</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <div class="custom-select-wrapper">
                    <select class="custom-select" id="history-sort">
                      <option value="newest">Newest first</option>
                      <option value="oldest">Oldest first</option>
                      <option value="longest">Longest first</option>
                      <option value="shortest">Shortest first</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <button class="btn-outlined" id="export-history">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    Export
                  </button>
                  <button class="btn-outlined text-red-500 border-red-500/20 hover:bg-red-500/10" id="clear-history">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                    Clear All
                  </button>
                </div>
              </div>
            </div>

            <!-- History Content -->
            <div class="space-y-3" id="history-container">
              <!-- Sample conversations -->
              <div class="glass-panel-interactive p-5 rounded-lg conversation-item" data-date="2025-08-23" data-keywords="anxiety morning breathing meditation">
                <div class="flex items-start justify-between mb-3">
                  <div class="flex-1">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="text-sm font-medium text-on-surface">Today, 2:30 PM</div>
                      <div class="px-2 py-1 bg-primary/10 text-primary text-xs rounded-full">18 messages</div>
                      <div class="px-2 py-1 bg-secondary/10 text-secondary text-xs rounded-full">22 min</div>
                    </div>
                    <p class="text-on-surface-variant text-sm leading-relaxed mb-2">
                      We discussed your morning anxiety patterns and explored breathing techniques. You mentioned feeling overwhelmed when waking up, and we worked through a 4-7-8 breathing exercise that seemed to help calm your nervous system.
                    </p>
                    <div class="flex items-center gap-2 text-xs text-on-surface-variant">
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">anxiety</span>
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">morning routine</span>
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">breathing</span>
                    </div>
                  </div>
                  <div class="flex gap-2 ml-4">
                    <button class="text-on-surface-variant hover:text-primary transition-colors p-2 hover:bg-primary/10 rounded" title="Resume conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M15 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>
                    </button>
                    <button class="text-on-surface-variant hover:text-primary transition-colors p-2 hover:bg-primary/10 rounded" title="View conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                      </svg>
                    </button>
                    <button class="text-on-surface-variant hover:text-red-500 transition-colors p-2 hover:bg-red-500/10 rounded" title="Delete conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>

              <div class="glass-panel-interactive p-5 rounded-lg conversation-item" data-date="2025-08-22" data-keywords="goals motivation productivity sleep">
                <div class="flex items-start justify-between mb-3">
                  <div class="flex-1">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="text-sm font-medium text-on-surface">Yesterday, 7:45 PM</div>
                      <div class="px-2 py-1 bg-primary/10 text-primary text-xs rounded-full">31 messages</div>
                      <div class="px-2 py-1 bg-secondary/10 text-secondary text-xs rounded-full">38 min</div>
                    </div>
                    <p class="text-on-surface-variant text-sm leading-relaxed mb-2">
                      Long conversation about setting realistic goals and improving productivity. We created a personalized evening routine to help with sleep quality and discussed strategies for maintaining motivation during challenging periods.
                    </p>
                    <div class="flex items-center gap-2 text-xs text-on-surface-variant">
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">goal setting</span>
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">motivation</span>
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">sleep routine</span>
                    </div>
                  </div>
                  <div class="flex gap-2 ml-4">
                    <button class="text-on-surface-variant hover:text-primary transition-colors p-2 hover:bg-primary/10 rounded" title="Resume conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M15 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>
                    </button>
                    <button class="text-on-surface-variant hover:text-primary transition-colors p-2 hover:bg-primary/10 rounded" title="View conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                      </svg>
                    </button>
                    <button class="text-on-surface-variant hover:text-red-500 transition-colors p-2 hover:bg-red-500/10 rounded" title="Delete conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>

              <div class="glass-panel-interactive p-5 rounded-lg conversation-item" data-date="2025-08-20" data-keywords="stress work boundaries mindfulness">
                <div class="flex items-start justify-between mb-3">
                  <div class="flex-1">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="text-sm font-medium text-on-surface">August 20, 4:15 PM</div>
                      <div class="px-2 py-1 bg-primary/10 text-primary text-xs rounded-full">24 messages</div>
                      <div class="px-2 py-1 bg-secondary/10 text-secondary text-xs rounded-full">29 min</div>
                    </div>
                    <p class="text-on-surface-variant text-sm leading-relaxed mb-2">
                      Discussion about work stress and setting healthy boundaries. We explored mindfulness techniques for managing overwhelming workdays and practiced a brief body scan meditation together.
                    </p>
                    <div class="flex items-center gap-2 text-xs text-on-surface-variant">
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">work stress</span>
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">boundaries</span>
                      <span class="bg-surface-variant/50 px-2 py-1 rounded">mindfulness</span>
                    </div>
                  </div>
                  <div class="flex gap-2 ml-4">
                    <button class="text-on-surface-variant hover:text-primary transition-colors p-2 hover:bg-primary/10 rounded" title="Resume conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M15 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>
                    </button>
                    <button class="text-on-surface-variant hover:text-primary transition-colors p-2 hover:bg-primary/10 rounded" title="View conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                      </svg>
                    </button>
                    <button class="text-on-surface-variant hover:text-red-500 transition-colors p-2 hover:bg-red-500/10 rounded" title="Delete conversation">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Empty state (hidden when there are conversations) -->
              <div class="glass-panel-secondary p-8 rounded-lg text-center hidden" id="history-empty">
                <svg class="w-12 h-12 text-on-surface-variant mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
                <h3 class="text-lg font-medium text-on-surface mb-2">No conversations found</h3>
                <p class="text-on-surface-variant text-sm">Try adjusting your search or filter criteria</p>
              </div>
            </div>
          </div>
        </div>

        <div id="panel-journal" class="flex-1 flex flex-col hidden app-panel">
          <div class="p-6 max-w-4xl mx-auto w-full overflow-y-auto min-h-screen">
            <!-- Panel Header -->
            <div class="setting-group mb-8">
              <div class="flex items-center justify-between">
                <div>
                  <h2 class="text-2xl font-medium text-on-surface mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                    Personal Journal
                  </h2>
                  <p class="setting-description">Capture your thoughts, reflections, and daily experiences</p>
                </div>
                <div class="text-right">
                  <div class="text-2xl font-bold text-primary" id="journal-entries-count">12</div>
                  <div class="text-sm text-on-surface-variant">Total entries</div>
                </div>
              </div>
            </div>

            <!-- Journal Controls -->
            <div class="setting-group mb-6">
              <div class="flex gap-4 items-center">
                <button class="btn-outlined" id="new-entry-btn">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                  </svg>
                  New Entry
                </button>
                <div class="flex-1 relative">
                  <input 
                    type="text" 
                    id="journal-search" 
                    placeholder="Search your journal entries..." 
                    class="custom-select w-full pl-12 pr-4 py-3"
                  />
                  <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                  </svg>
                </div>
                <div class="custom-select-wrapper">
                  <select class="custom-select" id="journal-filter">
                    <option value="all">All entries</option>
                    <option value="today">Today</option>
                    <option value="week">This week</option>
                    <option value="month">This month</option>
                  </select>
                  <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>
              </div>
            </div>

            <!-- New Entry Form (Hidden by default) -->
            <div class="setting-group hidden mb-6" id="new-entry-form">
              <div class="flex items-center justify-between mb-4">
                <h4 class="setting-title">New Journal Entry</h4>
                <button class="text-on-surface-variant hover:text-on-surface transition-colors" id="cancel-entry-btn">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                  </svg>
                </button>
              </div>
              
              <div class="space-y-4">
                <input 
                  type="text" 
                  id="entry-title" 
                  placeholder="Entry title (optional)" 
                  class="custom-select w-full"
                />
                <textarea 
                  id="entry-content" 
                  placeholder="What's on your mind today?" 
                  class="custom-select w-full min-h-[120px] resize-none"
                  rows="6"
                ></textarea>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <label class="text-sm font-medium text-on-surface">Mood:</label>
                    <div class="custom-select-wrapper">
                      <select class="custom-select" id="entry-mood">
                        <option value="">Select mood</option>
                        <option value="great">üòä Great</option>
                        <option value="good">üôÇ Good</option>
                        <option value="okay">üòê Okay</option>
                        <option value="down">üòî Down</option>
                        <option value="anxious">üò∞ Anxious</option>
                      </select>
                      <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </div>
                  </div>
                  <div class="flex gap-3">
                    <button class="btn-outlined" id="save-draft-btn">Save Draft</button>
                    <button class="btn-outlined" id="save-entry-btn">Save Entry</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Journal Entries -->
            <div class="space-y-4" id="journal-entries">
              <!-- Sample entries -->
              <div class="setting-group" data-date="2025-08-23">
                <div class="flex items-start gap-4">
                  <div class="flex flex-col items-center text-center min-w-[60px]">
                    <div class="text-2xl font-bold text-primary">23</div>
                    <div class="text-sm text-on-surface-variant">Aug</div>
                  </div>
                  <div class="flex-1">
                    <div class="flex items-center justify-between mb-2">
                      <div>
                        <h4 class="setting-title mb-1">Morning Reflections</h4>
                        <div class="flex items-center gap-3 text-sm text-on-surface-variant">
                          <span>Today, 8:30 AM</span>
                          <span class="text-lg">üòä</span>
                        </div>
                      </div>
                      <div class="flex gap-2">
                        <button class="text-on-surface-variant hover:text-primary transition-colors" title="Edit">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                          </svg>
                        </button>
                        <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <p class="setting-description">Started the day with gratitude practice. Feeling more centered and ready to tackle the challenges ahead. The morning walk really helped clear my mind...</p>
                  </div>
                </div>
              </div>

              <div class="setting-group" data-date="2025-08-22">
                <div class="flex items-start gap-4">
                  <div class="flex flex-col items-center text-center min-w-[60px]">
                    <div class="text-2xl font-bold text-primary">22</div>
                    <div class="text-sm text-on-surface-variant">Aug</div>
                  </div>
                  <div class="flex-1">
                    <div class="flex items-center justify-between mb-2">
                      <div>
                        <h4 class="setting-title mb-1">Evening Wind Down</h4>
                        <div class="flex items-center gap-3 text-sm text-on-surface-variant">
                          <span>Yesterday, 9:15 PM</span>
                          <span class="text-lg">üòê</span>
                        </div>
                      </div>
                      <div class="flex gap-2">
                        <button class="text-on-surface-variant hover:text-primary transition-colors" title="Edit">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                          </svg>
                        </button>
                        <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <p class="setting-description">Had a mixed day today. Work was stressful but the team meeting went well. Looking forward to a better tomorrow. Need to remember to take breaks...</p>
                  </div>
                </div>
              </div>

              <div class="setting-group" data-date="2025-08-21">
                <div class="flex items-start gap-4">
                  <div class="flex flex-col items-center text-center min-w-[60px]">
                    <div class="text-2xl font-bold text-primary">21</div>
                    <div class="text-sm text-on-surface-variant">Aug</div>
                  </div>
                  <div class="flex-1">
                    <div class="flex items-center justify-between mb-2">
                      <div>
                        <h4 class="setting-title mb-1">Breakthrough Moment</h4>
                        <div class="flex items-center gap-3 text-sm text-on-surface-variant">
                          <span>2 days ago, 7:45 PM</span>
                          <span class="text-lg">üòä</span>
                        </div>
                      </div>
                      <div class="flex gap-2">
                        <button class="text-on-surface-variant hover:text-primary transition-colors" title="Edit">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                          </svg>
                        </button>
                        <button class="text-on-surface-variant hover:text-red-500 transition-colors" title="Delete">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <p class="setting-description">Finally understood what my therapist meant about mindful breathing. The afternoon anxiety episode was much more manageable using the techniques we discussed...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="panel-exercises" class="flex-1 flex flex-col hidden app-panel">
          <div class="p-6 max-w-4xl mx-auto w-full overflow-y-auto min-h-screen">
            <!-- Panel Header -->
            <div class="glass-panel p-6 rounded-xl mb-6">
              <div class="flex items-center justify-between">
                <div>
                  <h2 class="text-2xl font-medium text-on-surface mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                    Mindfulness & Exercises
                  </h2>
                  <p class="text-on-surface-variant text-sm opacity-80">Guided meditations and breathing exercises for mental wellness</p>
                </div>
                <div class="text-right">
                  <div class="text-2xl font-bold text-primary" id="exercises-count">8</div>
                  <div class="text-sm text-on-surface-variant">Available exercises</div>
                </div>
              </div>
            </div>
            
            <!-- Exercise Categories -->
            <div class="glass-panel-secondary p-4 rounded-lg mb-6">
              <div class="tabs-nav">
                <button class="tab-button active" data-category="breathing">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                  </svg>
                  Breathing
                </button>
                <button class="tab-button" data-category="meditation">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 0v4l3 3m-3-8a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  Meditation
                </button>
                <button class="tab-button" data-category="grounding">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                  </svg>
                  Grounding
                </button>
              </div>
            </div>

            <!-- Exercise Content -->
            <div class="space-y-4" id="exercises-container">
              <!-- Breathing Exercises -->
              <div class="glass-panel-interactive p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                  <div>
                    <h3 class="text-lg font-medium text-on-surface">4-7-8 Breathing</h3>
                    <p class="text-on-surface-variant text-sm">Calm your nervous system with controlled breathing</p>
                  </div>
                  <div class="flex items-center gap-3">
                    <div class="text-xs text-on-surface-variant">5 min</div>
                    <button class="btn-outlined px-4 py-2">
                      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M15 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>
                      Start
                    </button>
                  </div>
                </div>
                <div class="text-sm text-on-surface-variant">
                  Inhale for 4, hold for 7, exhale for 8. Repeat this cycle to activate your parasympathetic nervous system.
                </div>
              </div>

              <div class="glass-panel-interactive p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                  <div>
                    <h3 class="text-lg font-medium text-on-surface">Box Breathing</h3>
                    <p class="text-on-surface-variant text-sm">Square breathing pattern for focus and calm</p>
                  </div>
                  <div class="flex items-center gap-3">
                    <div class="text-xs text-on-surface-variant">3 min</div>
                    <button class="btn-outlined px-4 py-2">
                      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M15 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>
                      Start
                    </button>
                  </div>
                </div>
                <div class="text-sm text-on-surface-variant">
                  Equal counts for inhale, hold, exhale, and hold. Perfect for building concentration and reducing stress.
                </div>
              </div>

              <div class="glass-panel-interactive p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                  <div>
                    <h3 class="text-lg font-medium text-on-surface">5-4-3-2-1 Grounding</h3>
                    <p class="text-on-surface-variant text-sm">Sensory grounding technique for anxiety relief</p>
                  </div>
                  <div class="flex items-center gap-3">
                    <div class="text-xs text-on-surface-variant">3 min</div>
                    <button class="btn-outlined px-4 py-2">
                      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M15 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>
                      Start
                    </button>
                  </div>
                </div>
                <div class="text-sm text-on-surface-variant">
                  Notice 5 things you see, 4 you touch, 3 you hear, 2 you smell, 1 you taste. Anchor yourself in the present.
                </div>
              </div>
            </div>

            <!-- Coming Soon Section -->
            <div class="glass-panel-secondary p-8 rounded-lg text-center mt-6">
              <svg class="w-12 h-12 text-on-surface-variant mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <h3 class="text-lg font-medium text-on-surface mb-2">More exercises coming soon</h3>
              <p class="text-on-surface-variant text-sm">Progressive muscle relaxation, body scan meditations, and guided visualizations are being prepared</p>
            </div>
          </div>
        </div>

        <!-- Profile Panel -->
        <div id="panel-profile" class="flex-1 flex flex-col hidden app-panel">
          <div class="p-6 max-w-4xl mx-auto w-full overflow-y-auto min-h-screen">
            <!-- Panel Header -->
            <div class="glass-panel p-6 rounded-xl mb-6">
              <div class="flex items-center justify-between">
                <div>
                  <h2 class="text-2xl font-medium text-on-surface mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    Personal Profile
                  </h2>
                  <p class="text-on-surface-variant text-sm opacity-80">Your personal information helps me provide better, more personalized support</p>
                </div>
                <button class="btn-outlined" id="save-profile">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
                  </svg>
                  Save Profile
                </button>
              </div>
            </div>

            <div class="space-y-6">
              <!-- Basic Information -->
              <div class="glass-panel p-6 rounded-xl">
                <h3 class="text-lg font-medium text-on-surface mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
                  </svg>
                  Basic Information
                </h3>
                <div class="space-y-4">
                  <div>
                    <label for="profile-name" class="block text-sm font-medium text-on-surface mb-2">
                      Preferred Name
                    </label>
                    <input 
                      type="text" 
                      id="profile-name" 
                      placeholder="What would you like me to call you?"
                      class="custom-select w-full"
                      value=""
                    />
                    <p class="text-xs text-on-surface-variant mt-1">This helps me personalize our conversations</p>
                  </div>
                  
                  <div>
                    <label for="profile-pronouns" class="block text-sm font-medium text-on-surface mb-2">
                      Pronouns (Optional)
                    </label>
                    <div class="custom-select-wrapper">
                      <select id="profile-pronouns" class="custom-select">
                        <option value="">Select pronouns</option>
                        <option value="they/them">they/them</option>
                        <option value="she/her">she/her</option>
                        <option value="he/him">he/him</option>
                        <option value="other">Other</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                      </select>
                      <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </div>
                  </div>

                  <div>
                    <label for="profile-age-range" class="block text-sm font-medium text-on-surface mb-2">
                      Age Range (Optional)
                    </label>
                    <div class="custom-select-wrapper">
                      <select id="profile-age-range" class="custom-select">
                        <option value="">Select age range</option>
                        <option value="under-18">Under 18</option>
                        <option value="18-24">18-24</option>
                        <option value="25-34">25-34</option>
                        <option value="35-44">35-44</option>
                        <option value="45-54">45-54</option>
                        <option value="55-64">55-64</option>
                        <option value="65+">65+</option>
                      </select>
                      <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </div>
                    <p class="text-xs text-on-surface-variant mt-1">Helps me provide age-appropriate support</p>
                  </div>
                </div>
              </div>

              <!-- Mental Health Background -->
              <div class="glass-panel p-6 rounded-xl">
                <h3 class="text-lg font-medium text-on-surface mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                  </svg>
                  Mental Health Context
                </h3>
                <div class="space-y-4">
                  <div>
                    <label for="profile-challenges" class="block text-sm font-medium text-on-surface mb-2">
                      Current Challenges or Areas of Focus
                    </label>
                    <textarea 
                      id="profile-challenges" 
                      rows="4"
                      placeholder="Share what you're working on... (e.g., anxiety, depression, trauma recovery, stress management, relationship issues, etc.)"
                      class="custom-select w-full resize-none"
                    ></textarea>
                    <p class="text-xs text-on-surface-variant mt-1">This information is private and helps me understand how to best support you</p>
                  </div>

                  <div>
                    <label for="profile-triggers" class="block text-sm font-medium text-on-surface mb-2">
                      Triggers or Sensitive Topics (Optional)
                    </label>
                    <textarea 
                      id="profile-triggers" 
                      rows="3"
                      placeholder="Topics or situations that might be triggering for you..."
                      class="custom-select w-full resize-none"
                    ></textarea>
                    <p class="text-xs text-on-surface-variant mt-1">Helps me be more mindful in our conversations</p>
                  </div>

                  <div>
                    <label for="profile-coping" class="block text-sm font-medium text-on-surface mb-2">
                      Coping Strategies That Work For You
                    </label>
                    <textarea 
                      id="profile-coping" 
                      rows="3"
                      placeholder="What helps you feel better when you're struggling? (e.g., breathing exercises, journaling, music, nature, etc.)"
                      class="custom-select w-full resize-none"
                    ></textarea>
                    <p class="text-xs text-on-surface-variant mt-1">I can remind you of these when you need them</p>
                  </div>
                </div>
              </div>

              <!-- Goals and Preferences -->
              <div class="glass-panel p-6 rounded-xl">
                <h3 class="text-lg font-medium text-on-surface mb-4 flex items-center">
                  <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                  </svg>
                  Goals & Preferences
                </h3>
                <div class="space-y-4">
                  <div>
                    <label for="profile-goals" class="block text-sm font-medium text-on-surface mb-2">
                      What Are Your Current Goals?
                    </label>
                    <textarea 
                      id="profile-goals" 
                      rows="3"
                      placeholder="What would you like to work towards? (e.g., better sleep, managing anxiety, building confidence, improving relationships, etc.)"
                      class="custom-select w-full resize-none"
                    ></textarea>
                  </div>

                  <div>
                    <label for="profile-communication" class="block text-sm font-medium text-on-surface mb-2">
                      Communication Style Preference
                    </label>
                    <div class="custom-select-wrapper">
                      <select id="profile-communication" class="custom-select">
                        <option value="supportive">Supportive and encouraging</option>
                        <option value="direct">Direct and straightforward</option>
                        <option value="gentle">Gentle and patient</option>
                        <option value="challenging">Challenging when needed</option>
                        <option value="balanced">Balanced approach</option>
                      </select>
                      <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </div>
                  </div>

                  <div>
                    <label for="profile-reminders" class="block text-sm font-medium text-on-surface mb-2">
                      Important Reminders for Me
                    </label>
                    <textarea 
                      id="profile-reminders" 
                      rows="3"
                      placeholder="Anything specific you'd like me to remember about you or your situation..."
                      class="custom-select w-full resize-none"
                    ></textarea>
                  </div>
                </div>
              </div>

              <!-- Data Privacy Notice -->
              <div class="glass-panel-secondary p-4 rounded-lg">
                <div class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-primary mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                  </svg>
                  <div>
                    <h4 class="text-sm font-medium text-on-surface mb-1">Privacy & Data Security</h4>
                    <p class="text-xs text-on-surface-variant leading-relaxed">
                      Your personal information is stored locally on your device only. Nothing is shared with external servers. 
                      You can update or delete this information at any time. This data helps me provide more personalized and effective support.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="panel-settings" class="flex-1 flex flex-col hidden app-panel">
          <div class="p-6 max-w-4xl mx-auto w-full overflow-y-auto min-h-screen">
            <h2 class="text-2xl font-medium text-on-surface mb-8">Settings</h2>
            
            <!-- Settings Tabs -->
            <div class="settings-tabs mb-8">
              <div class="tabs-nav">
                <button class="tab-button active" data-tab="ai">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                  </svg>
                  AI & Chat
                </button>
                <button class="tab-button" data-tab="appearance">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"/>
                  </svg>
                  Appearance
                </button>
                <button class="tab-button" data-tab="privacy">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                  </svg>
                  Privacy
                </button>
              </div>
            </div>

            <!-- AI & Conversation Tab -->
            <div class="tab-content active" data-tab-content="ai">
              <div class="space-y-6">
                <div class="setting-group">
                  <h4 class="setting-title">AI Model</h4>
                  <div class="custom-select-wrapper">
                    <select id="model-select" class="custom-select">
                      <option>Loading models...</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <p class="setting-description">Choose which AI model to use for conversations</p>
                </div>

                <div class="setting-group">
                  <h4 class="setting-title">Response Style</h4>
                  <div class="custom-select-wrapper">
                    <select id="response-style" class="custom-select">
                      <option value="supportive">Supportive & Encouraging</option>
                      <option value="professional">Professional & Clinical</option>
                      <option value="casual">Casual & Friendly</option>
                      <option value="empathetic">Deeply Empathetic</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <p class="setting-description">Set the tone for AI responses</p>
                </div>

                <div class="setting-group">
                  <h4 class="setting-title">Voice Responses</h4>
                  <div class="material-switch">
                    <input type="checkbox" id="tts-enabled" />
                    <div class="switch-track">
                      <div class="switch-thumb"></div>
                    </div>
                    <label for="tts-enabled" class="switch-label">Enable text-to-speech responses</label>
                  </div>
                  <p class="setting-description">Hear AI responses spoken aloud</p>
                </div>
              </div>
            </div>

            <!-- Appearance Tab -->
            <div class="tab-content" data-tab-content="appearance">
              <div class="space-y-8">
                <div class="setting-group">
                  <h4 class="setting-title">Display Mode</h4>
                  <div class="custom-select-wrapper">
                    <select id="theme-mode-select" class="custom-select">
                      <option value="auto">Auto (Follow System)</option>
                      <option value="light">Light Mode</option>
                      <option value="dark">Dark Mode</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <p class="setting-description">Choose between light, dark, or automatic theme</p>
                </div>

                <div class="setting-group">
                  <h4 class="setting-title">Accent Color</h4>
                  <div class="color-theme-grid">
                    <button class="color-theme-card active" data-theme="smile">
                      <div class="color-preview" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);"></div>
                      <span>Ocean Blue</span>
                    </button>
                    <button class="color-theme-card" data-theme="forest">
                      <div class="color-preview" style="background: linear-gradient(135deg, #10b981, #059669);"></div>
                      <span>Forest Green</span>
                    </button>
                    <button class="color-theme-card" data-theme="sunset">
                      <div class="color-preview" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div>
                      <span>Sunset Orange</span>
                    </button>
                    <button class="color-theme-card" data-theme="lavender">
                      <div class="color-preview" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);"></div>
                      <span>Lavender Purple</span>
                    </button>
                  </div>
                  <p class="setting-description">Choose your preferred accent color</p>
                </div>
              </div>
            </div>

            <!-- Privacy Tab -->
            <div class="tab-content" data-tab-content="privacy">
              <div class="space-y-6">
                <div class="setting-group">
                  <h4 class="setting-title">Clear All Data</h4>
                  <button id="clear-data-btn" class="btn-outlined">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                    Clear All Data
                  </button>
                  <p class="setting-description">Remove all chat history and preferences from local storage</p>
                </div>
              </div>
            </div>

            <!-- Appearance Tab -->
            <div class="tab-content" data-tab-content="appearance">
              <div class="space-y-8">
                <div class="setting-group">
                  <h4 class="setting-title">Display Mode</h4>
                  <div class="custom-select-wrapper">
                    <select id="theme-mode-select" class="custom-select">
                      <option value="auto">Auto (Follow System)</option>
                      <option value="light">Light Mode</option>
                      <option value="dark">Dark Mode</option>
                    </select>
                    <svg class="select-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                  </div>
                  <p class="setting-description">Choose between light, dark, or automatic theme</p>
                </div>

                <div class="setting-group">
                  <h4 class="setting-title">Accent Color</h4>
                  <div class="color-theme-grid">
                    <button class="color-theme-card active" data-theme="smile">
                      <div class="color-preview" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);"></div>
                      <span>Ocean Blue</span>
                    </button>
                    <button class="color-theme-card" data-theme="forest">
                      <div class="color-preview" style="background: linear-gradient(135deg, #10b981, #059669);"></div>
                      <span>Forest Green</span>
                    </button>
                    <button class="color-theme-card" data-theme="sunset">
                      <div class="color-preview" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div>
                      <span>Sunset Orange</span>
                    </button>
                    <button class="color-theme-card" data-theme="lavender">
                      <div class="color-preview" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);"></div>
                      <span>Lavender Purple</span>
                    </button>
                  </div>
                  <p class="setting-description">Choose your preferred accent color</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Onboarding Modal -->
  <div id="onboarding-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Welcome to Smile AI</h3>
        <p class="modal-subtitle">Let's set up your experience</p>
      </div>
      
      <div class="modal-body">
        <div class="onboarding-step">
          <h4 class="step-title">Choose your AI model</h4>
          <select id="onboarding-model-select" class="material-select">
            <option>Loading available models...</option>
          </select>
          <p class="step-description">GPT-OSS 20B recommended for most conversations</p>
        </div>

        <div class="onboarding-step">
          <h4 class="step-title">Select a theme</h4>
          <div class="theme-grid">
            <button class="theme-card theme-card-active" data-theme="smile">
              <div class="theme-preview bg-gradient-to-br from-blue-500 to-blue-600"></div>
              <span>Ocean Blue</span>
            </button>
            <button class="theme-card" data-theme="forest">
              <div class="theme-preview bg-gradient-to-br from-green-500 to-green-600"></div>
              <span>Forest</span>
            </button>
            <button class="theme-card" data-theme="sunset">
              <div class="theme-preview bg-gradient-to-br from-orange-500 to-red-500"></div>
              <span>Sunset</span>
            </button>
            <button class="theme-card" data-theme="lavender">
              <div class="theme-preview bg-gradient-to-br from-purple-500 to-pink-500"></div>
              <span>Lavender</span>
            </button>
          </div>
        </div>

        <div class="onboarding-step">
          <label class="material-switch">
            <input id="onboarding-tts" type="checkbox" />
            <span class="switch-track">
              <span class="switch-thumb"></span>
            </span>
            <span class="switch-label">Enable voice responses</span>
          </label>
        </div>

        <div class="privacy-notice">
          <svg class="w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
          </svg>
          <div>
            <p class="notice-title">Privacy First</p>
            <p class="notice-text">Your conversations stay on your device. No data is sent to external servers.</p>
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button id="onboarding-complete" class="btn-primary w-full">Get Started</button>
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  import '../utils/app.ts';
</script>
